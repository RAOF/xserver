diff --git a/hw/xfree86/sdksyms.sh b/hw/xfree86/sdksyms.sh
index c0398da..07372ad 100755
--- a/hw/xfree86/sdksyms.sh
+++ b/hw/xfree86/sdksyms.sh
@@ -46,8 +46,10 @@ cat > sdksyms.c << EOF
 #include "misyncstr.h"
 
 /* Xext/Makefile.am -- half is module, half is builtin */
+#ifdef XV
 #include "xvdix.h"
 #include "xvmcext.h"
+#endif
 #include "geext.h"
 #include "geint.h"
 #ifdef MITSHM
